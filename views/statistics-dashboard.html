<style>
  .modules {
    text-align: center;
    background-color: #eeeeee69;
    border: 1px solid #eee;
    height: 110px;

  }

  .modules label {
    font-weight: 400;
    width: 90%;
    white-space: pre-line;
  }

  .modules:hover {
    background-color: #ffc10754;
    cursor: pointer;
  }

  .modules img {
    width: auto;
    height: 42px;
    margin-top: 10px;
  }

  .compactTable tr td {
    padding: 2px !important;
    font-size: 11px;
    line-height: 15px;
  }
  .btn.btn-success{
    background: #4670be !important;
    border: 1px solid #4670be !important;
  }
  .daterangepicker .ranges li.active, .daterangepicker .ranges li:hover {
    background: #e6f0f4!important;
    border-color: #4670be78!important;
    color: #000000!important;
}
</style>
<link rel="stylesheet" type="text/css" href="css/statistics-dashboard.css" />

<div class="container mt-3 platformBody static-contain" style="background-color: #e9f0f7;">
  <!-- begin breadcrumb -->
  <ol class="breadcrumb pull-right hidden-xs">
    <li class="breadcrumb-item">
      <a href="<%= basepath %>/" class="currentTime">Boodskap Platform</a>
    </li>
  </ol>
  <!-- end breadcrumb -->
  <!-- begin page-header -->
  <h1 class="page-header">Welcome to Boodskap IoT Platform!
    <small class="hidden-xs" style="font-size: 50%">Let's start building your IoT Solutions on the fly. </small>

  </h1>
  <div class="panel panel-inverse pt-3" style="background-color: #e9f0f7;padding-bottom: 30px;">
    <div class="panel-body p-0" id="statistics">
      <div class="row m-0" style="padding-bottom: 30px!important;">
        <div class="col-lg-5 full-md-width">
          <div class="row m-0 pb-2">
            <div class="pl-2 sec-head"> Overview</div>
            <div class="ml-auto">
              <div class="btn-group mr-2">
                <button class="btn btn-secondary btn-sm dropdown-toggle drop-static" type="button"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  All Time
                </button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="javascript:void(0)">6 hours</a>
                  <a class="dropdown-item" href="javascript:void(0)">12 hours</a>
                  <a class="dropdown-item" href="javascript:void(0)">1 day</a>
                </div>
              </div>
            </div>
          </div>
          <div class="row m-0 ">
            <div class="col-md-6 mb-20px stat-min-size">
              <div class="stat-frame count-side">
                <div class="tile">
                  <p class="title m-0"> Devices</p>
                  <div class="logo-side">
                    <div class="logo">
                      <i class="fa fa-laptop purple purplebg" aria-hidden="true"></i>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-6">
                    <div class="total-count">1.2K</div>
                  </div>
                  <div class="col-6 d-flex justify-content-end align-self-end fullcount">
                    <span class="purple mb-3">2,200,200</span>
                  </div>
                </div>
                <div class="time-period"><span class="stat-ratio green">+0.02%</span> Last 7 days </div>
              </div>
            </div>

            <div class="col-md-6 mb-20px stat-min-size">
              <div class="stat-frame count-side">
                <div class="tile">
                  <p class="title m-0"> Users</p>
                  <div class="logo-side">
                    <div class="logo">
                      <i class="fa fa-user-o blue bluebg" aria-hidden="true"></i>
                    </div>

                  </div>
                </div>
                <div class="row">
                  <div class="col-6">
                    <div class="total-count">145</div>
                  </div>
                  <div class="col-6 d-flex justify-content-end align-self-end fullcount"><span
                      class="blue mb-3">2,200,200</span></div>
                </div>
                <div class="time-period"><span class="stat-ratio red">+0.02%</span> Last 7 days </div>
              </div>
            </div>

          </div>
          <div class="row m-0">
            <div class="col-md-6 mb-20px stat-min-size">
              <div class="stat-frame count-side">
                <div class="tile">
                  <p class="title m-0"> Messages</p>
                  <div class="logo-side">
                    <div class="logo">
                      <i class="fa fa-envelope-o orange orangebg" aria-hidden="true"></i>
                    </div>

                  </div>
                </div>
                <div class="row">
                  <div class="col-6">
                    <div class="total-count">2.5<span class="mini-denot">m</span> </div>
                  </div>
                  <div class="col-6 d-flex justify-content-end align-self-end fullcount"><span
                      class="orange mb-3">2,200,200</span></div>
                </div>
                <div class="time-period"><span class="stat-ratio red">+0.02%</span> Last 7 days </div>
              </div>
            </div>

            <div class="col-md-6 mb-20px stat-min-size">
              <div class="stat-frame count-side">
                <div class="tile">
                  <p class="title m-0"> API Tokens</p>
                  <div class="logo-side">
                    <div class="logo">
                      <i class="fa fa-cogs pgreen pgreenbg" aria-hidden="true"></i>
                    </div>

                  </div>
                </div>
                <div class="row">
                  <div class="col-6">
                    <div class="total-count">1.3<span class="mini-denot">k</span> </div>
                  </div>
                  <div class="col-6 d-flex justify-content-end align-self-end fullcount"><span
                      class="pgreen mb-3">2,200,200</span></div>
                </div>
                <div class="time-period"><span class="stat-ratio green">+0.02%</span> Last 7 days </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-7 full-md-width">
          <div class="row m-0 pb-2">
            <div class="sec-head">Devices</div>
          </div>
          <div class="row m-0 stat-frame pl-0">
            <div class="col-md-4 pb-lg-0 pb-4">
              <div class="row m-0 pb-2">
                <div class="ml-auto">
                  <div class="btn-group">
                    <button class="btn btn-secondary btn-sm dropdown-toggle drop-static" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Today
                    </button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item" href="javascript:void(0)">Yesterday</a>
                      <a class="dropdown-item" href="javascript:void(0)">This Month</a>
                      <a class="dropdown-item" href="javascript:void(0)">Last 3 Months</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="skill-container">
                <div class="skill">
                  <div class="outer">
                    <div class="inner">
                      <div class="inner-head">Total</div>
                      <div class="inner-total">1.2k</div>
                      <div class="number" data-num="65">
                      </div>
                    </div>
                  </div>
                  <svg width="180px" height="180px">
                    <defs>
                      <linearGradient id="GradientColor">
                        <stop offset="0%" stop-color="#e9e63" />
                        <stop offset="100%" stop-color="#6737" />
                      </linearGradient>
                    </defs>
                    <circle cx="90" cy="90" r="80" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
           
              <div class="row pt-3 m-0 device-functionality ">
                <div class="col-sm-6 col-xs-6 no-border-xs" style="border-right: 1px dashed lightgrey;">
                  <div class="active-dev" >
                    <i class="fa fa-square" aria-hidden="true"></i>
                    <div class="dev-label py-2">
                      Active Devices
                    </div>
                    <div class="active-count"> 943 </div>
                  </div>
                </div>
                <div class="col-sm-6 col-xs-6 inactive-dev">
                  <i class="fa fa-square" aria-hidden="true"></i>
                  <div class="dev-label py-2">
                    Inactive Devices
                  </div>
                  <div class="inactive-count"> 300 </div>
                </div>

              </div>
            </div>
            <div class="col-md-8 b-md-none pt-lg-0 pt-4 no-border-xs" style="border-left: 1px solid #dfdfdf;">
              <div class="row m-0">
                <div class="pl-1 mr-auto" style="color:rgb(64, 64, 64) ;font-weight: 700;">
                  Active <br> Devices
                </div>
                <div class="ml-auto">
                  <div class="btn-group">
                    <button class="btn btn-secondary btn-sm dropdown-toggle drop-static" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Today
                    </button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item" href="javascript:void(0)">Yesterday</a>
                      <a class="dropdown-item" href="javascript:void(0)">This Month</a>
                      <a class="dropdown-item" href="javascript:void(0)">Last 3 Months</a>
                    </div>
                  </div>
                </div>
              </div>
              <div id="deviceChart" style="height:285px;"> </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row m-0">
        <div class="col-lg-12 mb-3">
          <div class="sec-head">Log Monitor</div>
        </div>
        <div class="col-lg-12">
          <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active xs-tab" id="pills-home-tab" data-toggle="pill" style="margin-left:5px" href="#pills-home" role="tab"
                aria-controls="pills-home"  aria-selected="true"><i class="fa fa-envelope-o" aria-hidden="true"></i>&nbsp; Messages</a>
            </li>
            <li class="nav-item">
              <a class="nav-link xs-tab" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
                aria-controls="pills-profile" onclick="loadLogs()" aria-selected="false"><i class="fa fa-calendar-o" aria-hidden="true"></i>&nbsp; Event Logs</a>
            </li>
            <li class="nav-item">
              <a class="nav-link xs-tab" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab"
                aria-controls="pills-contact"  aria-selected="false"><i class="fa fa-mobile" style="font-size: 20px;" aria-hidden="true"></i>&nbsp; Application Logs</a>
            </li>
          </ul>
          <div class="tab-content stat-frame" id="pills-tabContent" style="padding: 17px 8px;">
       <!--  Message Logs -->
            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
              <div class="row m-0 row-gap">
                <div class="col-sm-6  mr-auto">
                  <h4 class="panel-title">
                    Total Reported Messages: <b><span class="totalCount">0</span></b>
                  </h4>
                </div>
                <div class="col-sm-6">
                  <div class="form-check pt-0 d-flex">
                    <input class="form-check-input ml-sm-auto position-static pr-2" type="checkbox" value="ON"
                      id="liveUpdate" onchange="liveUpdate(this)">
                    <label class="form-check-label align-self-center pl-2 pr-4" for="defaultCheck1">
                      Live Update
                    </label>
                    <button class="btn-refresh" onclick="loadMessages()"> <i class="fa fa-refresh"
                        aria-hidden="true"></i></button>
                  </div>
                </div>
              </div>
              <div class="row m-0 pt-4 row-gap pb-2">
                <div class="col-lg-3 flex-50">
                  <form>
                    <div class="form-group">
                      <label for="exampleFormControlSelect1">Message Id</label>
                      <select class="form-control log-select msgList" onchange="loadMessages(this.value)"> </select>
                    </div>
                  </form>
                </div>
                <div class="col-lg-3 flex-50">
                  <form>
                    <div class="form-group">
                      <label for="exampleFormControlSelect1">Data Range</label>
                      <div id="reportrange" class="p-date shade" style="cursor: pointer">
                        <i class="fa fa-calendar"></i>&nbsp;
                        <span></span> <label style="display: inline-block;float:right"><i
                            class="fa fa-caret-down"></i></label>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="col-lg-3 flex-50">
                  <form>
                    <div class="form-group">
                      <label for="exampleFormControlSelect1">Statistics</label>
                      <div class="switches-container">
                        <input type="radio" id="switchTable" name="switchPlan" value="Table" checked="checked" />
                        <input type="radio" id="switchChart" name="switchPlan" value="Chart" />
                        <label for="switchTable" class="togTable" onclick="toggleView('Table')"><i class="fa fa-table"
                            aria-hidden="true"></i> Table View</label>
                        <label for="switchChart" onclick="toggleView('Chart')"><i class="fa fa-bar-chart"
                            aria-hidden="true"></i> Chart View</label>
                        <div class="switch-wrapper">
                          <div class="switch">
                            <div><i class="fa fa-table" aria-hidden="true"></i> Table View</div>
                            <div><i class="fa fa-bar-chart" aria-hidden="true"></i> Chart View</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="col-lg-3 flex-50" id="tablemode">
                  <div class="form-group">
                    <form>
                      <div class="form-group">
                        <label for="exampleFormControlSelect1">Grid View</label>
                        <div class="switches-container">
                          <input type="radio" id="switchCompact" name="switchPlan" value="Compact" />
                          <input type="radio" id="switchFull" name="switchPlan" value="Full" checked="checked" />
                          <label for="switchCompact" onclick="tableView(1)"><i class="icon-th"></i> Compact</label>
                          <label for="switchFull" onclick="tableView(2)"><i class="icon-th-large"></i> Full</label>
                          <div class="switch-wrapper">
                            <div class="switch">
                              <div><i class="icon-th"></i> Compact</div>
                              <div><i class="icon-th-large" aria-hidden="true"></i> Full</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>

                </div>
              </div>
              <div class="row no-gutters mt-1" id="tablePanel">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="position: relative;padding: 0 15px;">
                  <table id="messageTable" class="table table-bordered no-wrap" cellspacing="0" width="100%">
                  </table>
                </div>
              </div>
              <div class="row no-gutters mt-1 px-2" id="chartPanel" style="display: none">
                <div class="col-md-3">
                  <div class="form-group">
                    <label class="inputLabel"><i class="icon-filter" style="font-size: 13px;"></i> Filter By</label>
                    <select class="form-control log-select input-sm" id="filterBy" onchange="buildChartData()">
                      <option value="YEAR">By Year</option>
                      <option value="MONTH">By Month</option>
                      <option value="DATE">By Date</option>
                      <option value="HOUR" selected="">By Hour</option>
                      <option value="MINUTE">By Minutes</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pt-2 pb-4" style="padding: 0 15px;">
                  <div id="message_view" class="echarts__demo" style="height:300px;"> </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pt-2 pb-3" style="padding: 0 15px;">
                  <div id="message_processed_view" style="height:300px;"> </div>
                </div>
              </div>
            </div>
       <!--  Event Logs -->
            <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
              <div class="row row-gap m-0">
                <div class="col-sm-6  mr-auto">
                  <h4 class="panel-title">
                    FAILURE RULES Logs
                  </h4>
                </div>
                <div class="col-sm-6 ">
                  <div class="form-check pt-0 d-flex">
                    <input class="form-check-input ml-sm-auto position-static pr-2" type="checkbox" value="ON"
                      id="liveUpdate" onchange="liveUpdate(this)">
                    <label class="form-check-label align-self-center pl-2 pr-4" for="defaultCheck1">
                      Live Update
                    </label>
                    <button class="btn-refresh" onclick="loadLogs()"> <i class="fa fa-refresh"
                        aria-hidden="true"></i></button>
                  </div>
                </div>
              </div>
              <div class="row m-0 row-gap pt-3 pb-2">
                <div class="col-lg-4">
                  <form>
                    <div class="form-group">
                      <label >Select</label>
                      <select class="form-control log-select" id="logType" onchange="loadLogs()">
                      </select>
                    </div>
                  </form>
                </div>
                <div class="col-lg-3">
                  <form>
                    <div class="form-group">
                      <label for="exampleFormControlSelect1">Total Count</label>
                      <h5 class="event_totalCount">0</h5>
                    </div>
                  </form>
                </div>
              </div>
              <div class="row no-gutters  mt-1">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="position: relative;padding: 0 15px;">
                  <table id="logTable" class="table table-bordered no-wrap" cellspacing="0" width="100%">
                  </table>
                </div>
              </div>
            </div>
       <!--  Application Logs -->     
            <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
              <div class="row m-0 pb-2 row-gap contact-tab">
                <div class="col-lg-2">
                  <!-- <div class="check-connection" style="line-height: 2.6;"><span><i style="font-size: 6px;"
                        class="fa fa-circle" aria-hidden="true"></i></span> Connected</div> -->
                        <span class="serverStatus" style="float:left;margin-top: 5px;"></span>
                </div>
                <div class="col-lg-4">
                  <form>
                    <div class="form-group d-flex flex-col">
                      <label class="pr-1rem mb-0 pt-1 pb-2">Filter By Log Level</label>
                      <select class="form-control log-select w-xs-100 flex-50 logLevelList" >
                        <option value="ALL">All Logs</option>
                        </select>
                    </div>
                  </form>
                </div>
                <div class="col-lg-4">
                  <form>
                    <div class="form-group d-flex flex-col">
                      <label class="pr-1rem mb-0 pt-1 pb-2">Filter By Nodes</label>
                      <select class="form-control log-select w-xs-100 flex-50 nodesList" id="exampleFormControlSelect1">
                        <option value="ALL">All Nodes</option>
                        </select>
                    </div>
                  </form>
                </div>

                <div class="col-lg-2 ml-sm-auto text-sm-left" >
                  <button class="btn trash-button" onclick="clearLogs()"><i class="fa fa-trash-o" aria-hidden="true" ></i> Clear Logs</button>
                </div>
              </div>
              <div class="row m-0" style="padding: 10px;">
                <!-- <div class="appLog">
                  <p>Welcome to Boodskap</p>
                </div> -->
                <div class="col-lg-12 appLog logCard" style="overflow: auto;overflow-x: hidden;">
                  <ul class="logList nav">

                  </ul>
              </div>
              </div>
              <div id="idModal" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Message</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        </div>
                        <div class="modal-body">
                            <code><p class="idData"></p></code>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            
            
            <div id="cmdModal" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Command</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        </div>
                        <div class="modal-body">
                            <code><p class="cmdData"></p></code>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end panel -->
</div>
<script src="resources/js/echarts.lib.min.js" type="text/javascript"></script>
<script src="controllers/statistics-dashboard.js"></script>